(window.webpackJsonpmtg_deck_library=window.webpackJsonpmtg_deck_library||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/card_back.2ca7bd5a.jpg"},24:function(e,t,a){e.exports=a(35)},29:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a(2),r=a(4),c=a(3),s=a(5),o=a(0),i=a.n(o),u=a(12),m=a.n(u),d=(a(29),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).handleFunction=function(e){"function"===typeof a.props.clicked&&a.props.clicked(e)},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("i",{className:this.props.classes,id:this.props.manacolor,onClick:this.handleFunction})}}]),t}(o.Component)),g=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).handleFunction=function(e){"function"===typeof a.props.onWrite&&a.props.onWrite(e)},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("input",{type:"text",onChange:this.handleFunction})}}]),t}(o.Component),h=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,s=new Array(l),o=0;o<l;o++)s[o]=arguments[o];return(a=Object(r.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={url:" https://api.scryfall.com/cards/",currentQuery:"",cards:[]},a.handleColorsFilter=function(e){e.target.classList.toggle("mana-query-on");for(var t,n=document.querySelectorAll("i"),l=[],r=0;r<n.length;r++)n[r].classList.contains("mana-query-on")&&l.push(n[r].id);t=l.join("");var c="".concat(a.state.url,"search?q=c%3A").concat(t);a.getCards(c)},a.handleNameQuery=function(e){var t="%2F".concat(e.target.value,"%2F/i"),n="search?q=name%3A";n=a.state.url+n+t,a.getCards(n)},a.getPic=function(e){for(var t=a.state.cards,n=0;n<t.length;n++)e.target.id===t[n].oracle_id&&a.setState({currentPic:t[n].image_uris.normal})},a.getCards=function(e){fetch(e).then(function(e){return e.json()}).then(function(e){var t=[];e.data.forEach(function(e,a){t.push(e)}),a.setState({cards:t}),console.log(a.state)}).catch(function(e){a.setState({cards:[{oracle_id:"error",name:"no such card"}]})})},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"cardBrowser__inputs"},i.a.createElement("label",null,i.a.createElement("p",null,"Search:"),i.a.createElement(g,{onWrite:this.handleNameQuery})),i.a.createElement(d,{classes:"ms ms-cost ms-r",manacolor:"r",clicked:this.handleColorsFilter}),i.a.createElement(d,{classes:"ms ms-cost ms-g",manacolor:"g",clicked:this.handleColorsFilter}),i.a.createElement(d,{classes:"ms ms-cost ms-w",manacolor:"w",clicked:this.handleColorsFilter}),i.a.createElement(d,{classes:"ms ms-cost ms-u",manacolor:"u",clicked:this.handleColorsFilter}),i.a.createElement(d,{classes:"ms ms-cost ms-b",manacolor:"b",clicked:this.handleColorsFilter}),i.a.createElement(d,{classes:"ms ms-cost ms-c",manacolor:"c",clicked:this.handleColorsFilter}),i.a.createElement("label",null,i.a.createElement("p",null,"Converted mana cost"),i.a.createElement("input",{type:"number",min:"0",onChange:this.handleFilters}))),i.a.createElement("div",{className:"cardBrowser__output"},this.state.cards.map(function(e,t){return i.a.createElement("img",{key:t,className:"card-image",src:e.image_uris?e.image_uris.normal:null,id:e.oracle_id,name:e.name,title:e.name})})))}}]),t}(o.Component),p=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,"Decks screen")}}]),t}(o.Component),E=(o.Component,function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,"Welcome to MTG decks"),i.a.createElement("p",null,"Here you can store your Magic The Gathering cards in an online collection, create decks and analyze them."),i.a.createElement("p",null,"This is the final project for Coder's Lab bootcamp."),i.a.createElement("p",null,"It is built with React.js and Sass."),i.a.createElement("p",null,"It uses data from ",i.a.createElement("a",{href:"https://scryfall.com/"},"Scryfall API"),"."),i.a.createElement("p",null,"The site currently uses browser's local storage to store user data."),i.a.createElement("br",null),i.a.createElement("h3",null,"Sign in to begin adding cards"),i.a.createElement("br",null),i.a.createElement("h3",null,"TODO:"),i.a.createElement("ol",null,i.a.createElement("li",null,"fix user display (shows after refreshing)"),i.a.createElement("li",null,"logging and switching users"),i.a.createElement("li",null,"collection filters and searching"),i.a.createElement("li",null,"improve search in cardbrowser"),i.a.createElement("li",null,"autocompletion"),i.a.createElement("li",null,"deck building"),i.a.createElement("li",null,"styles styles styles"),i.a.createElement("li",null,"responsiveness")),i.a.createElement("br",null),i.a.createElement("h3",null,"Changelog:"),i.a.createElement("ul",null,i.a.createElement("li",null,"You can now build your collecion"),i.a.createElement("li",null,"Sign In works"),i.a.createElement("li",null,"You can now browse all Magic The Gathering cards")))}}]),t}(o.Component)),f=a(15),b=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).state={loginUser:"",loginPassword:""},a.sendToState=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.login=function(e){if(e.preventDefault(),a.state.loginUser.length<3)alert("Nickname should be at least 4 characters long"),document.querySelector("#signupForm").reset();else if(a.state.loginPassword.length<5)alert("Password should be at least 5 characters long"),document.querySelector("#signupForm").reset();else{var t;if(localStorage.getItem("users")&&0!==localStorage.getItem("users").length){(t=JSON.parse(localStorage.getItem("users"))).forEach(function(e){return e.loggedIn=!1});for(var n=0;n<t.length;n++)if(t[n].name===a.state.loginUser)return alert("There already is a ".concat(t[n].name," here")),document.querySelector("#signupForm").reset(),null}else t=[];var l={name:a.state.loginUser,password:a.state.loginPassword,avatar:"",collection:[],decks:[],loggedIn:!0};t.push(l),localStorage.setItem("users",JSON.stringify(t)),document.querySelector("#signupForm").reset(),a.setState({loginUser:"",loginPassword:""})}},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("form",{id:"signupForm",onSubmit:this.login},i.a.createElement("input",{type:"text",name:"loginUser",onChange:this.sendToState}),i.a.createElement("input",{type:"password",name:"loginPassword",onChange:this.sendToState}),i.a.createElement("input",{type:"submit",value:"send"}))}}]),t}(o.Component),y=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,s=new Array(l),o=0;o<l;o++)s[o]=arguments[o];return(a=Object(r.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={loginUser:"",loginPassword:""},a.sendToState=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.login=function(e){var t;e.preventDefault(),t=localStorage.getItem("users")&&0!==localStorage.getItem("users").length?JSON.parse(localStorage.getItem("users")):[];var n={name:a.state.loginUser,password:a.state.loginPassword,avatar:"",collection:[],decks:[],loggedIn:!0};t.push(n),localStorage.setItem("users",JSON.stringify(t)),document.querySelector("#signupForm").reset()},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("form",{id:"signupForm",onSubmit:this.login},i.a.createElement("input",{type:"text",name:"loginUser",onChange:this.sendToState}),i.a.createElement("input",{type:"password",name:"loginPassword",onChange:this.sendToState}),i.a.createElement("input",{type:"submit",value:"send"}))}}]),t}(o.Component),v=a(21),j=a.n(v),O=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,s=new Array(l),o=0;o<l;o++)s[o]=arguments[o];return(a=Object(r.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={userCards:null,viewedCard:""},a.addCard=function(e){e.preventDefault();var t=document.querySelector("#collection__input").value;fetch("https://api.scryfall.com/cards/named?fuzzy="+t).then(function(e){return e.json()}).then(function(e){if("error"===e.object)return null;var t,n=a.state.userCards;if(0===n.length)n.push(e);else{for(var l=!1,r=0;r<n.length;r++){if(console.log(r),e.name===n[r].name){if(console.log("jest ju\u017c taka karta"),n[r].count){n[r].count++,console.log("jest count wi\u0119c dodajemy");break}n[r].count=2,console.log("nie ma counta");break}r===n.length-1&&e.name!=n[r].name&&(l=!0,console.log("nie ma takiej karty!",n))}!0===l&&n.unshift(e)}if(a.setState({userCards:n}),localStorage.getItem("users")&&0!==localStorage.getItem("users").length){t=JSON.parse(localStorage.getItem("users"));for(var c=0;c<t.length;c++)!0===t[c].loggedIn&&(t[c].collection=a.state.userCards);localStorage.setItem("users",JSON.stringify(t))}else t=[]}).catch(function(e){console.log(e)})},a.showDetails=function(e){for(var t=e.target.innerText,n=a.state.userCards,l=0;l<n.length;l++)if(n[l].name===t){a.setState({viewedCard:n[l]});break}},a.flipCardFace=function(e){e.target.src===a.state.viewedCard.card_faces[0].image_uris.normal?e.target.src=a.state.viewedCard.card_faces[1].image_uris.normal:e.target.src=a.state.viewedCard.card_faces[0].image_uris.normal},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e;if(localStorage.getItem("users")&&0!==localStorage.getItem("users").length){e=JSON.parse(localStorage.getItem("users"));for(var t=0;t<e.length;t++)!0===e[t].loggedIn&&this.setState({userCards:e[t].collection});console.log(this.state)}else e=[]}},{key:"render",value:function(){var e,t,a=this,n=this.state.viewedCard;return e=null===this.state.userCards?i.a.createElement("p",null,"Add some cards"):this.state.userCards.map(function(e,t){var n=e.color_identity,l=e.rarity,r=[];return 0===n.length?r.push("card-neutral"):1===n.length?r.push(n):2===n.length?(n.forEach(function(e){return r.push(e)}),r=r.join("")):r="multicolored",i.a.createElement("li",{key:t,onMouseOver:a.showDetails,className:"collection__list-item ".concat(r)},i.a.createElement("span",{className:l},e.name),i.a.createElement("span",{className:"card-count"},e.count?e.count:null))}),t=n?n.card_faces?n.card_faces[0].image_uris.normal:n.image_uris.normal:j.a,i.a.createElement("div",{className:"collection__container"},i.a.createElement("form",{className:"collection__input-area",onSubmit:this.addCard},i.a.createElement("label",null,i.a.createElement("p",null,"Write card name:"),i.a.createElement("input",{type:"text",id:"collection__input"})),i.a.createElement("input",{type:"submit",className:"collection__btn",value:"Add"})),i.a.createElement("ul",{className:"collection__list"},e),i.a.createElement("div",{className:"collection__card-details"},i.a.createElement("img",{src:t,alt:""===n?null:n.name,className:"collection__image",onClick:n.card_faces?this.flipCardFace:null}),i.a.createElement("table",{className:"collection__card-stats"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",{span:"row"},"Name"),i.a.createElement("td",null,n.name)),i.a.createElement("tr",null,i.a.createElement("th",{span:"row"},"Type"),i.a.createElement("td",null,n.type_line)),i.a.createElement("tr",null,i.a.createElement("th",{span:"row"},"Colors"),i.a.createElement("td",null,n.colors)),i.a.createElement("tr",null,i.a.createElement("th",{span:"row"},"Color Identity"),i.a.createElement("td",null,n.color_identity)),i.a.createElement("tr",null,i.a.createElement("th",{span:"row"},"Mana Cost"),i.a.createElement("td",null,n.mana_cost)),i.a.createElement("tr",null,i.a.createElement("th",{span:"row"},"Rarity"),i.a.createElement("td",null,n.rarity)),i.a.createElement("tr",null,i.a.createElement("th",{span:"row"},"Release Date"),i.a.createElement("td",null,n.released_at)),i.a.createElement("tr",null,i.a.createElement("th",{span:"row"},"Set"),i.a.createElement("td",null,n.set_name)),i.a.createElement("tr",null,i.a.createElement("th",{span:"row"},"EDHREC Rank"),i.a.createElement("td",null,n.edhrec_rank)),i.a.createElement("tr",null,i.a.createElement("th",{span:"row"},"Price"),i.a.createElement("td",null,n.prices?n.prices.eur:null," \u20ac"))))))}}]),t}(o.Component),_=a(11),C=a(10),S=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,s=new Array(l),o=0;o<l;o++)s[o]=arguments[o];return(a=Object(r.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={loggedUser:""},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e,t;if(localStorage.getItem("users")&&0!==localStorage.getItem("users").length){e=JSON.parse(localStorage.getItem("users"));for(var a=0;a<e.length;a++)!0===e[a].loggedIn&&(t=e[a].name);this.setState({loggedUser:t})}else e=[]}},{key:"render",value:function(){return i.a.createElement("header",null,i.a.createElement("div",{id:"logo"},i.a.createElement("h1",null,"decks")),i.a.createElement("nav",null,i.a.createElement("ul",{id:"navigation"},i.a.createElement("li",null,i.a.createElement(_.b,{exact:!0,to:"/",className:"menu-link",activeClassName:"currentPage"},"start")),i.a.createElement("li",null,i.a.createElement(_.b,{to:"/collection",className:"menu-link",activeClassName:"currentPage"},"collection")),i.a.createElement("li",null,i.a.createElement(_.b,{to:"/decks",className:"menu-link",activeClassName:"currentPage"},"decks")),i.a.createElement("li",null,i.a.createElement(_.b,{to:"/browse_cards",className:"menu-link",activeClassName:"currentPage"},"all cards")))),i.a.createElement("div",{id:"user_display"},i.a.createElement("div",{id:"user_display_options"},i.a.createElement("p",{id:"user_display_name"},this.state.loggedUser),i.a.createElement("p",{id:"user_display_show_navlinks"},i.a.createElement("span",null,i.a.createElement(_.b,{to:"/register",className:"register_or_login"},"Sign In"))," | ",i.a.createElement("span",null,i.a.createElement(_.b,{to:"/login",className:"register_or_login"},"Log In")))),i.a.createElement("div",{id:"user_avatar"})))}}]),t}(o.Component),k=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("footer",null)}}]),t}(o.Component),w=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,null,i.a.createElement(S,null),i.a.createElement("main",null,i.a.createElement(C.c,null,i.a.createElement(C.a,{exact:!0,path:"/",component:E}),i.a.createElement(C.a,{path:"/register",component:b}),i.a.createElement(C.a,{path:"/login",component:y}),i.a.createElement(C.a,{path:"/collection",component:O}),i.a.createElement(C.a,{path:"/decks",component:p}),i.a.createElement(C.a,{path:"/browse_cards",component:h})))),i.a.createElement(k,null))}}]),t}(o.Component),N=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(w,null)}}]),t}(o.Component);m.a.render(i.a.createElement(N,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.e4188638.chunk.js.map